<!doctype html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mateo Gomez | Portfolio</title>
<meta name="description" content="Portfolio de Mateo Gomez" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
<style>
/* =========================
   1) TOKENS (CSS variables)
   ========================= */
:root {
  --bg: #f6f7f9;
  --elev: #fff;
  --soft: #edf1f5;
  --txt: #161a22;
  --muted: #566074;
  --border: rgba(20, 25, 34, .12);
  --accent: #ff8a2a;
  --accent2: #ff7a18;
  --glow: rgba(255, 122, 24, .24);
  --shadow: 0 18px 44px rgba(0, 0, 0, .14);
  --r: 16px;
  --head: 74px;
}
@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0d1117;
    --elev: #141b23;
    --soft: #1b2430;
    --txt: #f2f6ff;
    --muted: #b4bfd2;
    --border: rgba(255, 255, 255, .12);
    --shadow: 0 20px 46px rgba(0, 0, 0, .45);
  }
}
:root[data-theme=light] {
  --bg: #f6f7f9;
  --elev: #fff;
  --soft: #edf1f5;
  --txt: #161a22;
  --muted: #566074;
  --border: rgba(20, 25, 34, .12);
  --shadow: 0 18px 44px rgba(0, 0, 0, .14);
}
:root[data-theme=dark] {
  --bg: #0d1117;
  --elev: #141b23;
  --soft: #1b2430;
  --txt: #f2f6ff;
  --muted: #b4bfd2;
  --border: rgba(255, 255, 255, .12);
  --shadow: 0 20px 46px rgba(0, 0, 0, .45);
}

/* =========================
   2) RESET / BASE
   ========================= */
* {
  box-sizing: border-box;
}
html {
  scroll-behavior: smooth;
}
body {
  margin: 0;
  font-family: Inter, sans-serif;
  background:
    radial-gradient(circle at 20% -20%, rgba(255, 122, 24, .16), transparent 34%),
    radial-gradient(circle at 86% 0, rgba(255, 168, 106, .13), transparent 36%),
    var(--bg);
  color: var(--txt);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
}
img {
  display: block;
  max-width: 100%;
  height: auto;
}
a {
  color: inherit;
  text-decoration: none;
}
:focus-visible {
  outline: 2px solid #ffc18a;
  outline-offset: 3px;
  border-radius: 8px;
}

/* =========================
   3) LAYOUT
   ========================= */
.container {
  width: min(1120px, calc(100% - 2rem));
  margin: auto;
}
section {
  padding: 5.2rem 0;
}
.hero {
  padding-top: 6rem;
}
.grid {
  margin-top: 1.9rem;
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
}
@media (min-width: 700px) {
  .grid {
    grid-template-columns: repeat(2, 1fr);
  }
}
@media (min-width: 1024px) {
  .grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* =========================
   4) COMPONENTS
   - header/nav
   - hero
   - grid/cards
   - modal/panel
   - chips/skills
   - forms
   ========================= */
header {
  position: sticky;
  top: 0;
  z-index: 50;
  background: color-mix(in srgb, var(--bg) 82%, transparent);
  backdrop-filter: blur(8px);
  border-bottom: 1px solid var(--border);
}
.hin {
  height: var(--head);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
}
.brand {
  font-weight: 700;
  letter-spacing: .02em;
}
nav {
  display: flex;
  gap: .7rem;
  align-items: center;
  flex-wrap: wrap;
  justify-content: flex-end;
}
nav a {
  padding: .42rem .62rem;
  border-radius: 10px;
  color: var(--muted);
  font-weight: 500;
}
nav a:hover {
  background: color-mix(in srgb, var(--soft) 75%, transparent);
  color: var(--txt);
}
.icon {
  width: 2.2rem;
  height: 2.2rem;
  border-radius: 10px;
  display: grid;
  place-items: center;
  background: var(--elev);
  border: 1px solid var(--border);
}
.toggle {
  display: inline-flex;
  gap: .45rem;
  align-items: center;
  color: var(--muted);
  font-size: .88rem;
}
.sw {
  appearance: none;
  width: 46px;
  height: 26px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--soft);
  position: relative;
  cursor: pointer;
}
.sw:after {
  content: "";
  width: 18px;
  height: 18px;
  border-radius: 50%;
  position: absolute;
  left: 4px;
  top: 3px;
  background: var(--txt);
  transition: transform .2s;
}
.sw:checked {
  background: color-mix(in srgb, var(--accent) 30%, var(--soft));
}
.sw:checked:after {
  transform: translateX(20px);
  background: #fff;
}
h1 {
  margin: .8rem 0 0;
  font-size: clamp(2rem, 4.8vw, 4rem);
  line-height: 1.07;
  letter-spacing: -.02em;
}
.sub {
  margin: .8rem 0 0;
  font-size: clamp(1rem, 2.2vw, 1.3rem);
  color: var(--muted);
  font-weight: 500;
}
.lead {
  max-width: 64ch;
  color: var(--muted);
}
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 0;
  border-radius: 12px;
  padding: .75rem 1.15rem;
  font-weight: 600;
  cursor: pointer;
  transition: transform .2s, box-shadow .2s;
}
.pri {
  background: linear-gradient(135deg, var(--accent2), var(--accent));
  color: #fff;
  box-shadow: 0 10px 26px rgba(255, 122, 24, .34);
}
.pri:hover {
  transform: translateY(-2px);
}
.h2 {
  margin: 0;
  font-size: clamp(1.55rem, 3vw, 2.2rem);
}
.sec-lead {
  margin: .75rem 0 0;
  color: var(--muted);
  max-width: 66ch;
}
.card {
  padding: 0;
  border: 1px solid var(--border);
  border-radius: var(--r);
  overflow: hidden;
  background: var(--elev);
  box-shadow: var(--shadow);
  text-align: left;
  color: inherit;
  cursor: pointer;
  transition: transform .22s, box-shadow .24s, border-color .24s;
}
.card:hover,
.card:focus-visible {
  transform: translateY(-6px);
  border-color: color-mix(in srgb, var(--accent) 55%, var(--border));
  box-shadow: 0 18px 40px rgba(0, 0, 0, .24), 0 0 0 1px var(--glow);
}
.media {
  aspect-ratio: 16/9;
  overflow: hidden;
  border-bottom: 1px solid var(--border);
  position: relative;
  background: linear-gradient(140deg, color-mix(in srgb, var(--accent) 24%, var(--soft)), var(--soft));
}
.media:after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(to top, rgba(0, 0, 0, .22), transparent 45%);
}
.media img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.cbody {
  padding: 1rem;
  display: grid;
  gap: .75rem;
}
.card-tags {
  display: flex;
  flex-wrap: wrap;
  gap: .45rem;
  padding: .9rem 1rem 0;
}
.tag {
  font-size: .78rem;
  line-height: 1;
  padding: .42rem .6rem;
  border-radius: 999px;
  background: rgba(255, 255, 255, .06);
  border: 1px solid rgba(255, 255, 255, .10);
  color: rgba(255, 255, 255, .86);
  letter-spacing: .01em;
  user-select: none;
}
.tag--accent {
  border-color: color-mix(in srgb, var(--accent) 50%, rgba(255, 255, 255, .08));
  background: color-mix(in srgb, var(--accent) 12%, rgba(255, 255, 255, .04));
}
.ct {
  margin: 0;
  font-size: 1rem;
}
.cs {
  margin: 0;
  font-size: .92rem;
  color: var(--muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.chips {
  display: flex;
  flex-wrap: wrap;
  gap: .45rem;
}
.chip {
  font-size: .76rem;
  padding: .2rem .58rem;
  border: 1px solid var(--border);
  border-radius: 999px;
  background: color-mix(in srgb, var(--soft) 80%, transparent);
  color: var(--muted);
  font-weight: 600;
}
.more {
  font-size: .88rem;
  color: var(--accent);
  font-weight: 600;
}
.skills {
  margin-top: 1.4rem;
  display: flex;
  flex-wrap: wrap;
  gap: .65rem;
}
.skill {
  padding: .46rem .82rem;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--soft) 78%, transparent);
  color: var(--muted);
  font-weight: 600;
  font-size: .85rem;
  opacity: 0;
  transform: translateY(10px);
  transition: opacity .45s, transform .45s;
}
.skill.v {
  opacity: 1;
  transform: translateY(0);
}
.panel {
  margin-top: 1.6rem;
  border: 1px solid var(--border);
  border-radius: var(--r);
  background: var(--elev);
  padding: clamp(1rem, 2.2vw, 2rem);
  box-shadow: var(--shadow);
}
.points {
  color: var(--muted);
  padding-left: 1.1rem;
}
.points li {
  margin-bottom: .4rem;
}
.form {
  display: grid;
  gap: .85rem;
}
.f {
  display: grid;
  gap: .32rem;
}
.f label {
  font-size: .9rem;
  font-weight: 600;
  color: var(--muted);
}
.f input,
.f textarea {
  width: 100%;
  font: inherit;
  color: var(--txt);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: .75rem .82rem;
  background: color-mix(in srgb, var(--soft) 70%, transparent);
}
.f textarea {
  min-height: 140px;
  resize: vertical;
}
.f input:focus,
.f textarea:focus {
  outline: none;
  border-color: color-mix(in srgb, var(--accent) 60%, var(--border));
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 18%, transparent);
}
.status {
  min-height: 1.2rem;
  font-size: .9rem;
  color: var(--muted);
}
.status.ok {
  color: color-mix(in srgb, var(--accent) 72%, var(--txt));
  font-weight: 600;
}
footer {
  padding: 2rem 0 3rem;
  color: var(--muted);
  font-size: .88rem;
}
.ov {
  position: fixed;
  inset: 0;
  background: rgba(4, 7, 12, .68);
  backdrop-filter: blur(3px);
  display: grid;
  justify-items: end;
  z-index: 90;
  opacity: 0;
  pointer-events: none;
  transition: opacity .26s;
}
.ov.open {
  opacity: 1;
  pointer-events: auto;
}
.modal {
  width: min(900px, 100%);
  height: 100dvh;
  max-height: 100dvh;
  background: var(--elev);
  border-left: 1px solid var(--border);
  box-shadow: -20px 0 45px rgba(0, 0, 0, .35);
  display: flex;
  flex-direction: column;
  transform: translateX(100%);
  transition: transform .32s;
}
.ov.open .modal {
  transform: none;
}
.mh {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem;
  border-bottom: 1px solid rgba(255, 255, 255, .08);
  position: sticky;
  top: 0;
  z-index: 2;
  flex: 0 0 auto;
  background: rgba(12, 16, 20, .72);
  backdrop-filter: blur(10px);
}
.mh h3 {
  margin: 0;
  font-size: clamp(1.1rem, 2vw, 1.5rem);
}
.x {
  width: 2.3rem;
  height: 2.3rem;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--soft);
  font-size: 1.2rem;
  cursor: pointer;
}
.mb {
  padding: 18px 1rem 28px;
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}
.big {
  aspect-ratio: 16/9;
  border: 1px solid var(--border);
  border-radius: 14px;
  overflow: hidden;
  background: var(--soft);
}
.big img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.desc {
  color: var(--muted);
  display: grid;
  gap: .75rem;
}
.desc p {
  margin: 0;
}
.m-hero {
  border-radius: 16px;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, .08);
  background: rgba(255, 255, 255, .03);
  aspect-ratio: auto;
}
.m-hero img {
  display: block;
  width: 100%;
  height: clamp(320px, 45vh, 520px);
  object-fit: contain;
  object-position: center;
  background: rgba(0, 0, 0, .22);
}
.m-desc {
  margin-top: 14px;
  line-height: 1.65;
  color: rgba(255, 255, 255, .82);
}
.m-features {
  margin-top: 8px;
}
.m-bullets {
  margin: 0;
  padding-left: 20px;
  display: grid;
  gap: 8px;
  color: rgba(255, 255, 255, .82);
}
.m-bullets li {
  line-height: 1.55;
}
.m-meta {
  margin-top: 16px;
  padding: 14px;
  border: 1px solid rgba(255, 255, 255, .08);
  border-radius: 16px;
  background: rgba(255, 255, 255, .03);
}
.m-dl {
  display: grid;
  grid-template-columns: 110px 1fr;
  gap: 8px 12px;
  margin: 0;
}
.m-dl dt {
  color: var(--muted);
  font-weight: 600;
}
.m-dl dd {
  margin: 0;
  color: rgba(255, 255, 255, .86);
}
.stack-block {
  margin-top: 16px;
}
.stack-title {
  margin: 0 0 .6rem;
  font-size: .9rem;
  letter-spacing: .01em;
  color: var(--muted);
  font-weight: 700;
}
#mStack {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}
#mStack .chip {
  background: rgba(255, 255, 255, .06);
  border: 1px solid rgba(255, 255, 255, .08);
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 13px;
  color: rgba(255, 255, 255, .86);
}
.sep {
  height: 1px;
  background: rgba(255, 255, 255, .08);
  margin: 18px 0;
}
#repo {
  background: linear-gradient(180deg, rgba(255, 122, 24, 1), rgba(255, 92, 10, 1));
  color: #0b0e12;
  border-radius: 12px;
  padding: 12px 14px;
  font-weight: 700;
}
#repo:hover {
  transform: translateY(-1px);
  box-shadow: 0 14px 40px rgba(255, 122, 24, .18);
}
.thumbs {
  display: flex;
  gap: 12px;
  overflow-x: auto;
  padding: 10px 2px;
}
.th {
  flex: 0 0 160px;
  width: 160px;
  height: 100px;
  padding: 0;
  border-radius: 14px;
  border: 1px solid rgba(255, 255, 255, .08);
  overflow: hidden;
  background: rgba(255, 255, 255, .03);
  cursor: pointer;
  opacity: .92;
  transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease, opacity .2s ease;
}
.th img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  object-position: center;
  background: rgba(0, 0, 0, .22);
}
.th:hover {
  transform: translateY(-1px);
  opacity: 1;
}
.th.active {
  opacity: 1;
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(255, 122, 24, .28);
}
section[aria-label="Galería del proyecto"] .big {
  aspect-ratio: auto;
  min-height: clamp(260px, 40vh, 480px);
  display: grid;
  place-items: center;
  border-radius: 16px;
  background: rgba(255, 255, 255, .03);
  border: 1px solid rgba(255, 255, 255, .08);
}
#gMain {
  width: 100%;
  height: clamp(260px, 40vh, 480px);
  object-fit: contain;
  object-position: center;
  background: rgba(0, 0, 0, .22);
}
.m-cap {
  margin-top: 10px;
  color: var(--muted);
  font-size: .92rem;
}

/* =========================
   5) UTILITIES
   ========================= */
/* keep order */

/* =========================
   6) ANIMATIONS
   ========================= */
.reveal {
  opacity: 0;
  transform: translateY(18px);
  transition: opacity .55s, transform .55s;
}
.reveal.v {
  opacity: 1;
  transform: none;
}
@media (max-width: 860px) {
  .hin {
    height: auto;
    min-height: var(--head);
    padding: .7rem 0;
    align-items: flex-start;
    flex-direction: column;
  }
  nav {
    width: 100%;
    justify-content: space-between;
  }
  .hero {
    padding-top: 4.2rem;
  }
  section {
    padding: 4.4rem 0;
  }
}
@media (max-width: 520px) {
  #repo {
    width: 100%;
  }
}
@media (prefers-reduced-motion: reduce) {
  *,
  *:before,
  *:after {
    animation-duration: 1ms !important;
    transition-duration: 1ms !important;
    scroll-behavior: auto !important;
  }
}
</style>
</head>
<body>
<header><div class="container hin"><a class="brand" href="#inicio" aria-label="Ir al inicio">Mateo Gomez</a><nav aria-label="Navegación principal"><a href="#proyectos">Proyectos</a><a href="#skills">Skills</a><a href="#sobre-mi">Sobre mí</a><a href="#contacto">Contacto</a><a class="icon" href="https://github.com/Hutchy147" target="_blank" rel="noopener noreferrer" aria-label="Abrir perfil de GitHub"><svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true"><path d="M8 0C3.58 0 0 3.58 0 8a8 8 0 0 0 5.47 7.59c.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49C4 14.09 3.48 13.23 3.32 12.78c-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.5-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82A7.53 7.53 0 0 1 8 3.47c.68 0 1.36.09 2 .26 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></a><label class="toggle" for="themeToggle">Tema<input id="themeToggle" class="sw" type="checkbox" role="switch" aria-label="Alternar tema" /></label></nav></div></header>
<main id="inicio">
<section class="hero reveal"><div class="container"><h1>Mateo Gomez</h1><p class="sub">Estudiante de desarrollo de software</p><p class="lead">Diseño y desarrollo interfaces enfocadas en producto: claras, rápidas y consistentes. Este portfolio resume proyectos, stack y decisiones de implementación con una estética moderna y prolija.</p><a class="btn pri" href="#proyectos" aria-label="Ir a proyectos">Ver proyectos</a></div></section>
<section id="proyectos" class="reveal"><div class="container"><h2 class="h2">Proyectos</h2><div id="grid" class="grid" aria-live="polite"></div></div></section>
<section id="skills" class="reveal"><div class="container"><h2 class="h2">Skills</h2><p class="sec-lead">Tecnologías y herramientas utilizadas en proyectos.</p><div id="skillsWrap" class="skills" aria-label="Listado de skills"></div></div></section>
<section id="sobre-mi" class="reveal"><div class="container"><h2 class="h2">Sobre mí</h2><article class="panel"><p>Soy estudiante de segundo año de Desarrollo de Software. Me interesa construir soluciones claras y funcionales, enfocadas en resolver problemas reales. Suelo detectar oportunidades de mejora y automatización para optimizar procesos. Actualmente estoy trabajando en desarrollo de aplicaciones y automatización de flujos.</p></article></div></section>
<section id="contacto" class="reveal"><div class="container"><h2 class="h2">Contacto</h2><p class="sec-lead">Escribime desde este formulario.</p><article class="panel"><form id="contactForm" class="form" novalidate><div class="f"><label for="name">Nombre</label><input id="name" name="name" type="text" autocomplete="name" required /></div><div class="f"><label for="email">Email</label><input id="email" name="email" type="email" autocomplete="email" required /></div><div class="f"><label for="message">Mensaje</label><textarea id="message" name="message" required></textarea></div><button class="btn pri" type="submit">Enviar mensaje</button><p id="status" class="status" role="status" aria-live="polite"></p></form></article></div></section>
</main>
<footer><div class="container">© <span id="year"></span> Mateo Gomez. Portfolio académico.</div></footer>
<div id="overlay" class="ov" aria-hidden="true"><aside class="modal" role="dialog" aria-modal="true" aria-labelledby="mTitle" tabindex="-1"><div class="mh"><h3 id="mTitle">Detalle del proyecto</h3><button id="close" class="x" type="button" aria-label="Cerrar panel">×</button></div><div class="mb"><div class="big m-hero"><img id="main" src="" alt="Imagen principal" /></div><div id="desc" class="desc m-desc"></div><div class="sep"></div><section class="stack-block m-stack-wrap" aria-label="Tecnologías usadas"><h4 class="stack-title m-subtitle">Tecnologías usadas</h4><div id="mStack" class="chips m-stack"></div></section><section class="m-features"><h3 class="m-subtitle">Características</h3><ul class="m-bullets" id="mFeatures"></ul></section><section class="m-meta"><h3 class="m-subtitle">Ficha rápida</h3><dl class="m-dl" id="mMeta"></dl></section><div class="sep"></div><section aria-label="Galería del proyecto"><div class="big"><img id="gMain" src="" alt="Galería" loading="lazy" /></div><div class="m-cap" id="mCap"></div><div id="thumbs" class="thumbs"></div></section><a id="repo" class="btn pri" target="_blank" rel="noopener noreferrer" href="#">Ver repositorio</a></div></aside></div>
<script>
// =========================
// 1) CONFIG / CONSTANTS
// =========================
const USER_EMAIL = "mateogomez3521@gmail.com";
const skills = ["HTML", "CSS", "JavaScript", "Python", "Flask", "MySQL", "Flutter", "Dart", "Node.js", "Pandas"];
let lastFocus = null;
let manualTheme = null;

// =========================
// 2) DATA (projects)
// =========================
const projects = [
  {
    id: "franco-invader",
    title: "Franco Invader",
    shortDescription: "Juego arcade inspirado en Space Invaders desarrollado desde cero con Pygame.",
    tags: ["Juego", "Pygame"],
    longDescription:
      "Franco Invader es un juego arcade 2D inspirado en el clásico Space Invaders, desarrollado utilizando Pygame. El proyecto explora mecánicas básicas de gameplay, manejo de sprites y detección de colisiones, junto con la implementación de lógica de enemigos y control del jugador en tiempo real.",
    stack: ["Python", "Pygame"],
    repoUrl: "https://github.com/Hutchy147/franco_invader",
    images: ["images/franco-invader/hero.jpeg"]
  },
  {
    id: "vinificacion",
    title: "Vinificación de vinos",
    shortDescription: "Sistema de trazabilidad y control del proceso productivo del vino para bodegas.",
    tags: ["Backend", "API", "Trazabilidad"],
    longDescription:
      "Vinificación de vinos es una plataforma backend orientada a la trazabilidad y control del ciclo productivo del vino, desde la recepción de materia prima hasta la exportación. La solución permite gestionar procesos, asegurar calidad y mantener registro de cada etapa logística y productiva dentro de la bodega.",
    stack: ["Python", "Flask", "MySQL"],
    repoUrl: "https://github.com/Toomasmg/vinificacion_api",
    images: ["images/vinificacion/hero.jpeg"]
  },
  {
    id: "impulsar",
    title: "Impulsar",
    shortDescription: "Plataforma web para promoción de emprendimientos y productos digitales.",
    tags: ["Web", "Producto", "Marketplace"],
    longDescription:
      "Impulsar es una plataforma web diseñada para visibilizar emprendimientos y facilitar la promoción de productos. El proyecto busca brindar a emprendedores un espacio digital donde puedan presentar sus servicios, ampliar su alcance y potenciar sus ventas mediante una interfaz accesible y dinámica.",
    stack: ["HTML", "CSS", "JavaScript", "Python", "MySQL"],
    repoUrl: "https://github.com/Franv-Dev/IMPULSAR",
    images: ["images/impulsar/hero.jpeg"]
  },
  {
    id: "metin2-autofarm",
    title: "Metin2 Autofarm",
    shortDescription: "Script de automatización para farming en Metin2 mediante auto inputs.",
    tags: ["Automatización", "Scripting", "Gaming"],
    longDescription:
      "Metin2 Autofarm es una herramienta de automatización desarrollada en Python que permite ejecutar secuencias de inputs para optimizar el proceso de farming dentro del juego Metin2. El proyecto explora scripting, control de eventos y automatización de tareas repetitivas para mejorar la eficiencia del usuario sin intervención manual constante.",
    stack: ["Python", "Pandas", "Automatización"],
    repoUrl: "https://github.com/Hutchy147/metin2-auto",
    images: ["images/metin2-autofarm/hero.jpeg"]
  },
  {
    id: "como-llego",
    title: "¿Cómo llego?",
    shortDescription: "Aplicación logística orientada a la optimización de rutas y tiempos de entrega.",
    tags: ["Mobile", "Logística", "Rutas"],
    longDescription:
      "¿Cómo llego? es una aplicación enfocada en la gestión logística y optimización de rutas de entrega. El proyecto busca mejorar la eficiencia del transporte mediante el cálculo de trayectos y la reducción de tiempos de distribución, integrando desarrollo mobile con Flutter y lógica backend para la coordinación de entregas.",
    stack: ["Flutter", "Dart", "Node.js", "Python", "Pandas"],
    repoUrl: "https://github.com/Hutchy147/como-llego-",
    images: [
      "images/como-llego/hero.jpeg",
      "images/como-llego/menu.jpeg",
      "images/como-llego/marker.jpeg",
      "images/como-llego/ruta.jpeg"
    ]
  },
  {
    id: "sistema-ventas",
    title: "Sistema de Ventas",
    shortDescription: "Sistema de administración de ventas desarrollado como API REST.",
    tags: ["API", "CRUD", "MySQL"],
    longDescription:
      "Sistema de Ventas es una API REST desarrollada con Flask y MySQL orientada a la gestión modular de productos, clientes, proveedores, categorías y ventas. El proyecto fue trabajado de forma colaborativa, implementando cada módulo en ramas separadas, lo que permitió una arquitectura organizada y escalable junto a un flujo de desarrollo estructurado.",
    stack: ["Flask", "Flask-SQLAlchemy", "MySQL", "PyMySQL", "Postman", "Git & GitHub"],
    repoUrl: "https://github.com/Hutchy147/repo-ventas",
    images: ["images/sistema-ventas/hero.jpeg"]
  }
];

const el = {
  grid: document.getElementById("grid"),
  skillsWrap: document.getElementById("skillsWrap"),
  overlay: document.getElementById("overlay"),
  modal: document.querySelector(".modal"),
  mTitle: document.getElementById("mTitle"),
  main: document.getElementById("main"),
  gMain: document.getElementById("gMain"),
  desc: document.getElementById("desc"),
  mStack: document.getElementById("mStack"),
  mFeatures: document.getElementById("mFeatures"),
  mMeta: document.getElementById("mMeta"),
  mCap: document.getElementById("mCap"),
  thumbs: document.getElementById("thumbs"),
  repo: document.getElementById("repo"),
  close: document.getElementById("close"),
  themeToggle: document.getElementById("themeToggle"),
  year: document.getElementById("year"),
  form: document.getElementById("contactForm"),
  status: document.getElementById("status")
};

function ph(title, i) {
  const p = [["#ff7a18", "#fcb045"], ["#ff914d", "#ffd48f"], ["#f67b30", "#ffb067"], ["#ff6f3c", "#fcae6a"]][i % 4];
  const st = title.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
  const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='1200' height='675'><defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'><stop offset='0%' stop-color='${p[0]}'/><stop offset='100%' stop-color='${p[1]}'/></linearGradient></defs><rect width='1200' height='675' fill='#0f1115'/><rect x='40' y='40' width='1120' height='595' rx='28' fill='url(#g)' opacity='.95'/><circle cx='240' cy='170' r='120' fill='rgba(255,255,255,.16)'/><circle cx='980' cy='520' r='150' fill='rgba(255,255,255,.12)'/><text x='80' y='350' font-family='Inter,Arial,sans-serif' font-size='54' fill='#fff' font-weight='700'>${st}</text><text x='80' y='410' font-family='Inter,Arial,sans-serif' font-size='28' fill='rgba(255,255,255,.88)'>Imagen de muestra</text></svg>`;
  return `data:image/svg+xml;charset=UTF-8,${encodeURIComponent(svg)}`;
}
const data = projects.map((p, i) => {
  const f = ph(p.title, i);
  return { ...p, images: p.images?.length ? p.images : [f, f, f] };
});

// =========================
// 3) DOM HELPERS
// =========================
const sys = () => window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";

function applyTheme(t) {
  document.documentElement.setAttribute("data-theme", t);
  el.themeToggle.checked = t === "light";
  el.themeToggle.setAttribute("aria-checked", String(el.themeToggle.checked));
}
function initTheme() {
  applyTheme(manualTheme || sys());
  window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", () => {
    if (!manualTheme) applyTheme(sys());
  });
  el.themeToggle.addEventListener("change", () => {
    manualTheme = el.themeToggle.checked ? "light" : "dark";
    applyTheme(manualTheme);
  });
}

// =========================
// 4) RENDER (cards + sections)
// =========================
function renderProjects() {
  const frag = document.createDocumentFragment();
  data.forEach((p) => {
    const c = document.createElement("button");
    c.type = "button";
    c.className = "card reveal";
    c.setAttribute("aria-label", `Ver detalle del proyecto ${p.title}`);
    const tagsHtml = p.tags?.length
      ? `<div class="card-tags">${p.tags.slice(0, 3).map((t, i) => `<span class='tag ${i === 0 ? "tag--accent" : ""}'>${t}</span>`).join("")}</div>`
      : "";
    c.innerHTML = `<div class="media"><img src="${p.images[0]}" alt="Vista previa de ${p.title}" loading="lazy"/></div>${tagsHtml}<div class="cbody"><h3 class="ct">${p.title}</h3><p class="cs">${p.shortDescription}</p><div class="chips">${p.stack.slice(0, 3).map((s) => `<span class='chip'>${s}</span>`).join("")}</div><span class="more">Ver más →</span></div>`;
    c.addEventListener("click", () => openModal(p, c));
    frag.appendChild(c);
  });
  el.grid.appendChild(frag);
}
function renderSkills() {
  const frag = document.createDocumentFragment();
  skills.forEach((s) => {
    const b = document.createElement("span");
    b.className = "skill";
    b.textContent = s;
    frag.appendChild(b);
  });
  el.skillsWrap.appendChild(frag);
}
function renderDesc(list) {
  el.desc.innerHTML = "";
  const paragraphs = Array.isArray(list) ? list : [list];
  paragraphs.forEach((t) => {
    const p = document.createElement("p");
    p.textContent = t;
    el.desc.appendChild(p);
  });
}
function renderStack(list) {
  el.mStack.innerHTML = (list || []).map((s) => `<span class='chip'>${s}</span>`).join("");
}
function renderFeatures(project) {
  const section = el.mFeatures.closest(".m-features");
  let list = project.features;
  if ((!list || !list.length) && project.id === "como-llego") {
    list = [
      "Búsqueda de ubicación y visualización en mapa",
      "Configuración de ruta y navegación",
      "Acceso a ubicaciones guardadas e historial"
    ];
  }
  if (!list || !list.length) {
    section.hidden = true;
    el.mFeatures.innerHTML = "";
    return;
  }
  section.hidden = false;
  el.mFeatures.innerHTML = "";
  const frag = document.createDocumentFragment();
  list.forEach((item) => {
    const li = document.createElement("li");
    li.textContent = item;
    frag.appendChild(li);
  });
  el.mFeatures.appendChild(frag);
}
function renderMeta(project) {
  const section = el.mMeta.closest(".m-meta");
  if (project.id !== "como-llego") {
    section.hidden = true;
    el.mMeta.innerHTML = "";
    return;
  }
  const rows = [
    ["Tipo", "App mobile / Logística"],
    ["Rol", "Desarrollo (Flutter + backend)"],
    ["Estado", "MVP"],
    ["Año", "2026"]
  ];
  section.hidden = false;
  el.mMeta.innerHTML = rows.map(([label, value]) => `<dt>${label}</dt><dd>${value}</dd>`).join("");
}
function captionForImage(projectId, src) {
  if (projectId !== "como-llego" || !src) return "";
  const file = src.split("/").pop().toLowerCase();
  const map = {
    "hero.jpeg": "Mapa principal",
    "menu.jpeg": "Menú y accesos rápidos",
    "marker.jpeg": "Marcador / acción principal",
    "ruta.jpeg": "Ruta calculada"
  };
  return map[file] || "";
}
function renderGalleryCaption(projectId, src) {
  const cap = captionForImage(projectId, src);
  if (!cap) {
    el.mCap.hidden = true;
    el.mCap.textContent = "";
    return;
  }
  el.mCap.hidden = false;
  el.mCap.textContent = cap;
}

// =========================
// 5) MODAL (open/close + focus trap + gallery)
// =========================
function renderThumbs(imgs, title, projectId) {
  const gallerySection = el.thumbs.closest("section");
  el.thumbs.innerHTML = "";
  el.gMain.src = imgs[0];
  el.gMain.alt = `Galería de ${title}`;
  renderGalleryCaption(projectId, imgs[0]);
  if (imgs.length <= 1) {
    gallerySection.hidden = true;
    renderGalleryCaption(projectId, "");
    return;
  }
  gallerySection.hidden = false;
  imgs.forEach((src, i) => {
    const b = document.createElement("button");
    b.type = "button";
    b.className = `th ${i === 0 ? "active" : ""}`;
    b.setAttribute("aria-label", `Ver imagen ${i + 1} de ${title}`);
    b.innerHTML = `<img src="${src}" alt="Miniatura ${i + 1} de ${title}" loading="lazy"/>`;
    b.addEventListener("click", () => {
      el.gMain.src = src;
      el.gMain.alt = `Imagen ${i + 1} de ${title}`;
      renderGalleryCaption(projectId, src);
      [...el.thumbs.querySelectorAll(".th")].forEach((x) => x.classList.remove("active"));
      b.classList.add("active");
    });
    el.thumbs.appendChild(b);
  });
}
function openModal(p, trigger) {
  lastFocus = trigger || document.activeElement;
  el.mTitle.textContent = p.title;
  el.main.src = p.images[0];
  el.main.alt = `Imagen principal de ${p.title}`;
  renderDesc(p.longDescription);
  renderStack(p.stack);
  renderFeatures(p);
  renderMeta(p);
  renderThumbs(p.images, p.title, p.id);
  el.repo.href = p.repoUrl;
  el.overlay.classList.add("open");
  el.overlay.setAttribute("aria-hidden", "false");
  document.body.style.overflow = "hidden";
  el.close.focus();
}
function closeModal() {
  if (!el.overlay.classList.contains("open")) return;
  el.overlay.classList.remove("open");
  el.overlay.setAttribute("aria-hidden", "true");
  document.body.style.overflow = "";
  if (lastFocus && lastFocus.focus) lastFocus.focus();
}
function trap(e) {
  if (!el.overlay.classList.contains("open") || e.key !== "Tab") return;
  const q = [...el.modal.querySelectorAll("button,a[href],input,textarea,select,[tabindex]:not([tabindex='-1'])")]
    .filter((n) => !n.disabled && n.offsetParent !== null);
  if (!q.length) return;
  const f = q[0];
  const l = q[q.length - 1];
  if (e.shiftKey && document.activeElement === f) {
    e.preventDefault();
    l.focus();
  } else if (!e.shiftKey && document.activeElement === l) {
    e.preventDefault();
    f.focus();
  }
}

// =========================
// 6) EVENTS (listeners)
// =========================
function modalEvents() {
  el.close.addEventListener("click", closeModal);
  el.overlay.addEventListener("click", (e) => {
    if (e.target === el.overlay) closeModal();
  });
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && el.overlay.classList.contains("open")) closeModal();
    trap(e);
  });
}
function anims() {
  const io = new IntersectionObserver((es, o) => {
    es.forEach((en) => {
      if (en.isIntersecting) {
        en.target.classList.add("v");
        o.unobserve(en.target);
      }
    });
  }, { threshold: .12 });
  document.querySelectorAll(".reveal").forEach((x) => io.observe(x));

  const so = new IntersectionObserver((es, o) => {
    es.forEach((en) => {
      if (!en.isIntersecting) return;
      [...el.skillsWrap.querySelectorAll(".skill")].forEach((b, i) => setTimeout(() => b.classList.add("v"), 45 * i));
      o.unobserve(en.target);
    });
  }, { threshold: .2 });
  so.observe(el.skillsWrap);
}
function form() {
  el.form.addEventListener("submit", (e) => {
    e.preventDefault();
    el.status.className = "status";
    el.status.textContent = "";
    if (!el.form.checkValidity()) {
      el.status.textContent = "Revisá los campos: nombre, email válido y mensaje son obligatorios.";
      el.form.reportValidity();
      return;
    }
    const n = document.getElementById("name").value.trim();
    const m = document.getElementById("email").value.trim();
    const msg = document.getElementById("message").value.trim();
    const subject = encodeURIComponent("Contacto desde portfolio");
    const body = encodeURIComponent(`Nombre: ${n}\nEmail: ${m}\n\nMensaje:\n${msg}`);
    window.location.href = `mailto:${USER_EMAIL}?subject=${subject}&body=${body}`;
    el.status.classList.add("ok");
    el.status.textContent = "Listo, se abrió tu cliente de correo.";
  });
}

function init() {
  el.year.textContent = new Date().getFullYear();
  renderProjects();
  renderSkills();
  initTheme();
  modalEvents();
  anims();
  form();
}
init();
</script>
</body>
</html>
